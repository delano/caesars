<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>File: README.rdoc [Caesars: Rapid DSL prototyping in Ruby.]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <div class='name'>README.rdoc</div>
        <div class='paths'>
          README.rdoc
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>2009-07-14 16:52:55 -0400</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <h1><a href="../classes/Caesars.html">Caesars</a> - v0.7</h1>
            <p>
            A simple class for rapid DSL prototyping in Ruby.
            </p>
            <p>
            NOTE: Post-processing of Caesars::Config subclasses changed in 0.7. In 0.6
            and earlier, the post-processing hook (Caesars::Config#postprocess) was
            called after every file was loaded. In 0.7 it&#8217;s called after all
            files have been loaded. This could break some highly dependent code in your
            subclasses of Caesars::Config so I apologize but I believe this is the
            right thing to do. If you are not satisfied with that apology, prepare
            yourself a caesar or bloody mary or any other beverage and send email me
            with the details!
            </p>
            <h2>Installation</h2>
            <p>
            One of:
            </p>
            <ul>
            <li>gem install caesars
            
            </li>
            <li>copy <a href="lib/caesars_rb.html">lib/caesars.rb</a> into your lib
            directory.
            
            </li>
            </ul>
            <p>
            Or for GitHub fans:
            </p>
            <ul>
            <li>gem install delano-caesars &#8212;source <a
            href="http://gems.github.com">gems.github.com</a>
            
            </li>
            <li>git clone git://github.com/delano/caesar.git
            
            </li>
            </ul>
            <h2>EXAMPLE 1 &#8212; A Simple DSL</h2>
            <pre>require 'caesars'&#x000A;&#x000A;class Flavour &lt; Caesars  # Subclass Caesars.&#x000A;end&#x000A;&#x000A;extend Flavour::DSL     # Bring the DSL into the current namespace.&#x000A;                        # This module is created dynamically based&#x000A;                        # on the name of the subclass.&#x000A;&#x000A;flavour do              # Start drinking! I mean, start writing your&#x000A;  spicy true            # domain specific language!&#x000A;  clamy true            # Use any attribute name you want.&#x000A;  salty true&#x000A;  vodka :very_true      # And any value you want.&#x000A;end&#x000A;&#x000A;p @flavour              # =&gt; #&lt;Flavour:0x3f56b0 ...&gt;&#x000A;p @flavour.spicy        # =&gt; true</pre>
            <h2>EXAMPLE 2 &#8212; Storing Blocks as Procs</h2>
            <pre>require 'caesars'&#x000A;&#x000A;class Staff &lt; Caesars&#x000A;&#x000A;  chill :calculate      # Delay execution of the blocks for the calculate&#x000A;                        # attribute. They will be stored as Procs.&#x000A;end&#x000A;&#x000A;extend Staff::DSL&#x000A;&#x000A;# The top level method is the lower case name of the class. For deeper&#x000A;# names like Class::SecondLevel it will use the final name&#x000A;# (i.e. secondlevel). You can supply an optional modifier name which&#x000A;# will be included in the instance variable (@staff_fte).&#x000A;staff :fte do&#x000A;  desc 'Our hard-working, &quot;full-time&quot; staff'&#x000A;&#x000A;  location :splashdown do&#x000A;    town :tsawwassen&#x000A;&#x000A;    person :steve, :sheila do&#x000A;      role :manager&#x000A;    end&#x000A;&#x000A;    person :steve do&#x000A;      role :cook&#x000A;      anger :high&#x000A;      hours 25&#x000A;      catchphrase &quot;Rah! [strokes goatee]&quot;&#x000A;    end&#x000A;&#x000A;    person :sheila do&#x000A;      catchphrase &quot;This gravy tastes like food I ate in a Mexican prison.&quot;&#x000A;      hours rand(20)&#x000A;      rate &quot;9.35/h&quot;&#x000A;      calculate :salary do |gumption|&#x000A;        (&quot;%.2f&quot; % [gumption * self.splashdown.sheila.rate.to_f]).to_f&#x000A;      end&#x000A;    end&#x000A;&#x000A;    person :delano do&#x000A;      role :cook&#x000A;      rate &quot;8.35/h&quot;&#x000A;      hours 57&#x000A;      satisfaction :low&#x000A;      calculate :salary do&#x000A;        self.splashdown.delano.rate.to_f * self.splashdown.delano.hours&#x000A;      end&#x000A;    end&#x000A;&#x000A;  end&#x000A;end&#x000A;&#x000A;p @staff_fte                    # =&gt; #&lt;Staff: ...&gt;&#x000A;p @staff_fte.desc               # =&gt; Our hard-working, &quot;full-time&quot; staff&#x000A;&#x000A;# Deeper attributes are also available via instance methods&#x000A;p @staff_fte.splashdown.delano  # =&gt; {:role=&gt;:cook, :rate=&gt;&quot;$8.35/h&quot;, :satisfaction=&gt;:low}&#x000A;p @staff_fte.splashdown.sheila  # =&gt; {:role=&gt;:manager, :catchphrase=&gt;&quot;This gravy tastes like food I ate in a Mexican prison.&quot;}&#x000A;p @staff_fte.splashdown.steve   # =&gt; {:role=&gt;[:manager, :cook], :anger=&gt;:high, :catchphrase=&gt;&quot;Rah! [strokes goatee]&quot;}&#x000A;p @staff_fte.splashdown.delano.satisfaction   # =&gt; :low&#x000A;&#x000A;# You can also access them using hash syntax&#x000A;p @staff_fte.splashdown[:steve][:role]  # =&gt; [:manager, :cook]&#x000A;&#x000A;# The &quot;chilled&quot; attributes store their blocks as Procs and are not executed automatically.&#x000A;# You can call them manually and send arguments like you normally would.&#x000A;p @staff_fte.splashdown.delano.salary.call             # =&gt; 475.95&#x000A;p @staff_fte.splashdown.sheila.salary.call(rand(100))  # =&gt; 549.77</pre>
            <h2>EXAMPLE 3 &#8212; External Config Files</h2>
            <pre>require 'caesars'&#x000A;&#x000A;class Food &lt; Caesars&#x000A;  chill :order&#x000A;end&#x000A;class Drink &lt; Caesars&#x000A;end&#x000A;&#x000A;class PartyConfig &lt; Caesars::Config&#x000A;  dsl Food::DSL&#x000A;  dsl Drink::DSL&#x000A;end&#x000A;&#x000A;conffile = File.join(File.dirname(__FILE__), 'party.conf')&#x000A;@config = PartyConfig.new(conffile)&#x000A;&#x000A;p @config.food.order.call   # =&gt; 10kg&#x000A;p @config[:drink][:wine]    # =&gt; 12L&#x000A;p @config                   # =&gt; &lt;PartyConfig:0x3f780c ...&gt;&#x000A;p @config.keys              # =&gt; [:food, :drink]&#x000A;&#x000A;# [... make changes to party.conf ...]&#x000A;&#x000A;@config.refresh</pre>
            <p>
            <b>party.conf</b>
            </p>
            <pre>food do&#x000A;  oysters &quot;10kg&quot;&#x000A;  order do&#x000A;    self.oysters&#x000A;  end&#x000A;end&#x000A;&#x000A;drink do&#x000A;  wine &quot;12L&quot;&#x000A;end</pre>
            <h2>More Info</h2>
            <ul>
            <li><a href="http://github.com/delano/caesars">GitHub</a>
            
            </li>
            <li><a href="http://www.youtube.com/watch?v=ycElb0tB9_U">Inspiration</a>
            
            </li>
            <li><a href="http://twitter.com/solutious/status/1264327499">Recipe</a>
            
            </li>
            </ul>
            <h2>Credits</h2>
            <ul>
            <li>OrderedHash implementation by jan molic
            
            </li>
            <li>Delano Mandelbaum (delano@solutious.com)
            
            </li>
            </ul>
            <h2>Thanks</h2>
            <ul>
            <li>Clams, Tomatoes, Grey Goose, and the rest of the crew.
            
            </li>
            <li>Caleb Buxton (<a href="http://cpb.ca">cpb.ca</a>) for early feedback.
            
            </li>
            <li>Solutious Inc (<a href="http://solutious.com">solutious.com</a>)
            
            </li>
            </ul>
            <h2>Related Projects</h2>
            <ul>
            <li><a href="http://github.com/auser/dslify">DSLify</a>
            
            </li>
            </ul>
            <h2>License</h2>
            <p>
            See: <a href="LICENSE_txt.html">LICENSE.txt</a>
            </p>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
